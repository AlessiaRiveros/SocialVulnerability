import rasterio
import rasterio.plot
import matplotlib.pyplot as plt
import geopandas as gpd
import os
from shapely.geometry import box

pdir = r'p:\11209200-020-sociale-kwetsbaarheid'

gdf = gpd.read_file(os.path.join(pdir, 'Data', 'Income', 'AZONE.shp'))
raster = rasterio.open(os.path.join(pdir, 'Data', 'DFlowFM', 'DFlowFM_T10_D120_fou.tif'))

# boundaries to exclude areas where FIAT results not available
xmin = -63.26
xmax = -63.05
ymin = -17.9
ymax = -17.65

bbox = box(xmin, ymin, xmax, ymax)
gdf = gpd.clip(gdf, mask=bbox)

gdf = gdf.to_crs(raster.crs)


fig, ax = plt.subplots(figsize=(10, 10))
rasterio.plot.show(raster, ax=ax)
ax.set_axis_off()
gdf.plot(ax=ax, facecolor='none', edgecolor='white', lw=0.1)
plt.tight_layout
plt.savefig(os.path.join(pdir, 'Figures', 'Inundation_AZONES.png'))
plt.show()
